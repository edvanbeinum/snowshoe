#!/usr/bin/env php
<?php

use Husky\Config\Factory as Config;

// Run the Husky static site generator from cmd line
require_once dirname(__FILE__) . '/../Husky/bootstrap.php';


$yadif = new Yadif_Container(Config::getConfig('dic')->getDependencies());

/* @var $builder Husky\Builder */
$builder = $yadif->getComponent('Husky\Builder');

try {

    // Away we go
    $builder->execute();
} catch (Exception $e) {

    //@todo implement a semi-decent logging system
    echo str_pad('', 30, "*") ."\n\n";
    echo $e->getMessage() ."\n\n";
    exit(1);
}
echo "Husky has run. See your new site at: \n\n", realpath(APPLICATION_PATH . Config::getConfig('app')->getPublicDirectory()), "\n";
exit(0);